<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Date of Birth - All Months Chart</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css?family=Poppins:600,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="design.css" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="shine"></div>
<div class="container">
  <h1>Date of Birth: Your Annual Single Digits</h1>
  <label for="dob">Date of Birth (ddmmyyyy):</label>
  <input type="text" id="dob" maxlength="8" placeholder="e.g. 16081995">
  <button class="btn-calc" onclick="showAllDigitsChart()">Show All Months Graph</button>
  <div id="result"></div>
  <div id="chartBox">
    <canvas id="monthsChart" width="430" height="320"></canvas>
  </div>
</div>
<script>
function reduceToSingleDigit(n) {
    while (n >= 10) {
        let sum_digits = 0;
        while (n > 0) {
            sum_digits += n % 10;
            n = Math.floor(n / 10);
        }
        n = sum_digits;
    }
    return n;
}
let monthsChart = null;
function showAllDigitsChart() {
    const dob = document.getElementById("dob").value.trim();
    let resultEl = document.getElementById("result");
    let chartBoxEl = document.getElementById("chartBox");
    if (!/^\d{8}$/.test(dob)) {
        resultEl.style.color="#e74c3c";
        resultEl.textContent = "Please enter valid DOB (8 digits: ddmmyyyy).";
        chartBoxEl.style.display = "none";
        if(monthsChart) monthsChart.destroy();
        return;
    }
    const day = parseInt(dob.slice(0,2), 10);
    const month = parseInt(dob.slice(2,4), 10);
    const year = parseInt(dob.slice(4), 10);

    const digits = [];
    for(let m=1; m<=12; m++) {
        let months_after = 0;
        if (m !== month) {
            months_after = (12 - month) + m;
        }
        let total = day + month + year + m + months_after;
        let single_digit = reduceToSingleDigit(total);
        digits.push(single_digit);
    }

    chartBoxEl.style.display = "block";
    resultEl.textContent = "";
    const ctx = document.getElementById('monthsChart').getContext('2d');
    if(monthsChart) monthsChart.destroy();
    monthsChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],
        datasets: [{
          label: "Your Single Digit for Each Month",
          data: digits,
          backgroundColor: [
            '#feb47b','#ff7e5f','#43cea2','#dad299','#ffd200','#b8ffd4',
            '#f7971e','#ffb677','#78c8e6','#ffb4c1','#b19cd9','#ffd6a5'
          ],
          borderRadius:12,
          borderSkipped: false
        }]
      },
      options: {
        animation: { duration: 1200 },
        plugins: {
          legend: { display: false }
        },
        scales: {
          y: {
            beginAtZero: true,
            suggestedMax: 9,
            stepSize: 1,
            grid: { color: '#fcb69f66' },
            ticks: { precision: 0 }
          }
        }
      }
    });
}
// Allow Enter key for calculation
document.getElementById("dob").addEventListener("keydown", function(e){
  if(e.key === "Enter") showAllDigitsChart();
});
</script>
</body>
</html>
